START:
;INIT_DEBUG_PIN:
	sbi DDRB,PIN_DEBUG
	sbi PORTB,PIN_DEBUG
	rcall DELAY
	rcall INIT_OLED
	ldi r17,0
	ldi r18,127
	ldi r19,0
	ldi r20,7
	ldi zl,low(IMG_DEMO*2)
	ldi zh,high(IMG_DEMO*2)
	rcall OLED_DRAW_BMP
	TOGGLE_DEBUG_PIN
	rcall DELAY
	rcall OLED_CLEAR_DISPLAY

	ldi r17,10
	ldi r18,100
	ldi r19,2
	ldi r20,2
	rcall OLED_SET_ADDRESSES

	ldi r17,'A'
	rcall OLED_DRAW_CHAR
	ldi r17,' '
	rcall OLED_DRAW_CHAR
	ldi r17,'b'
	rcall OLED_DRAW_CHAR
	ldi r17,'e'
	rcall OLED_DRAW_CHAR
	ldi r17,'l'
	rcall OLED_DRAW_CHAR
	ldi r17,'l'
	rcall OLED_DRAW_CHAR
	ldi r17,'a'
	rcall OLED_DRAW_CHAR
	ldi r17,' '
	rcall OLED_DRAW_CHAR
	ldi r17,'!'
	rcall OLED_DRAW_CHAR
	ldi r17,'!'
	rcall OLED_DRAW_CHAR
	ldi r17,'!'
	rcall OLED_DRAW_CHAR
/*	ldi r17,240
CHAR_LOOP_DEMO:
	TOGGLE_DEBUG_PIN
	rcall DELAY
	rcall OLED_DRAW_CHAR
	dec r17
	brne CHAR_LOOP_DEMO
*/

/*
	TOGGLE_DEBUG_PIN
	rcall OLED_CLEAR_DISPLAY_TABLE
	rcall OLED_SEND_DISPLAY_TABLE
	rcall OLED_CLEAR_DISPLAY
	rcall DELAY
	ldi r16,0
	ldi r17,0
	rcall OLED_SET_PIXEL
	ldi r16,10
	ldi r17,10
	rcall OLED_SET_PIXEL
	ldi r16,20
	ldi r17,20
	rcall OLED_SET_PIXEL
	ldi r16,30
	ldi r17,30
	rcall OLED_SET_PIXEL
	rcall OLED_SEND_DISPLAY_TABLE
	TOGGLE_DEBUG_PIN
	rcall DELAY
GET_1:
	ldi r16,10
	ldi r17,10
	rcall OLED_GET_PIXEL
	sbrc r18,0
	rcall OLED_CLEAR_PIXEL
GET_2:
	ldi r16,20
	ldi r17,20
	rcall OLED_GET_PIXEL
	sbrs r18,0
	rcall OLED_CLEAR_PIXEL
	rcall OLED_SEND_DISPLAY_TABLE

DRAW_LINE_HORIZONTAL_DEMO:
	ldi r17,0
	ldi r18,127
	ldi r19,1
	ldi r20,0xC0
	rcall OLED_DRAW_HORIZONTAL_LINE
DRAW_LINE_HORIZONTAL_DEMO_2:
	ldi r17,0
	ldi r18,127
	ldi r19,0
	ldi r20,0xf0
	rcall OLED_DRAW_HORIZONTAL_LINE

DRAW_LINE_VERTICAL_DEMO_1:
	ldi r17,0
	ldi r19,0
	ldi r20,7
	rcall OLED_DRAW_VERTICAL_LINE
DRAW_LINE_VERTICAL_DEMO_2:
	ldi r17,127
	ldi r19,0
	ldi r20,7
	rcall OLED_DRAW_VERTICAL_LINE
	*/

END:
    rjmp END

DELAY:
	push r16
	push r17
	push r18
	ldi r18,0x0A
DELAY_3:
	ldi r17,0xFF
DELAY_2:
	ldi r16,0xFF
DELAY_1:
	dec r16
	brne DELAY_1
	dec r17
	brne DELAY_2
	dec r18
	brne DELAY_3
	pop r18
	pop r17
	pop r16
	ret



IMG_DEMO: .db 	0x00, 0x03, 0x05, 0x09, 0x11, 0xFF, 0x11, 0x89, 0x05, 0xC3, 0x00, 0xE0, 0x00, 0xF0, 0x00, 0xF8,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x28, 0xFF, 0x11, 0xAA, 0x44, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x83, 0x01, 0x38, 0x44, 0x82, 0x92,\
	0x92, 0x74, 0x01, 0x83, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x44, 0xFF, 0x01, 0x7D,\
	0x7D, 0x7D, 0x01, 0x7D, 0x7D, 0x7D, 0x7D, 0x01, 0x7D, 0x7D, 0x7D, 0x7D, 0x7D, 0x01, 0xFF, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01,\
	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x3F, 0x03, 0x03,\
	0xF3, 0x13, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x01, 0xF1, 0x11, 0x61, 0x81, 0x01, 0x01, 0x01,\
	0x81, 0x61, 0x11, 0xF1, 0x01, 0x01, 0x01, 0x01, 0x41, 0x41, 0xF1, 0x01, 0x01, 0x01, 0x01, 0x01,\
	0xC1, 0x21, 0x11, 0x11, 0x11, 0x11, 0x21, 0xC1, 0x01, 0x01, 0x01, 0x01, 0x41, 0x41, 0xF1, 0x01,\
	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x11, 0x11, 0x11, 0x11, 0x11, 0xD3, 0x33,\
	0x03, 0x03, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0x00,\
	0x7F, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x01, 0x06, 0x18, 0x06,\
	0x01, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x7F, 0x40, 0x40, 0x00, 0x00, 0x00,\
	0x1F, 0x20, 0x40, 0x40, 0x40, 0x40, 0x20, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x7F, 0x40,\
	0x40, 0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x40, 0x30, 0x0C, 0x03, 0x00, 0x00,\
	0x00, 0x00, 0xE0, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x06, 0x06,\
	0x06, 0x06, 0x04, 0x04, 0x04, 0x84, 0x44, 0x44, 0x44, 0x84, 0x04, 0x04, 0x84, 0x44, 0x44, 0x44,\
	0x84, 0x04, 0x04, 0x04, 0x84, 0xC4, 0x04, 0x04, 0x04, 0x04, 0x84, 0x44, 0x44, 0x44, 0x84, 0x04,\
	0x04, 0x04, 0x04, 0x04, 0x84, 0x44, 0x44, 0x44, 0x84, 0x04, 0x04, 0x04, 0x04, 0x04, 0x84, 0x44,\
	0x44, 0x44, 0x84, 0x04, 0x04, 0x84, 0x44, 0x44, 0x44, 0x84, 0x04, 0x04, 0x04, 0x04, 0x06, 0x06,\
	0x06, 0x06, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x18, 0x14, 0x12, 0x11, 0x00, 0x00, 0x0F, 0x10, 0x10, 0x10,\
	0x0F, 0x00, 0x00, 0x00, 0x10, 0x1F, 0x10, 0x00, 0x00, 0x00, 0x08, 0x10, 0x12, 0x12, 0x0D, 0x00,\
	0x00, 0x18, 0x00, 0x00, 0x0D, 0x12, 0x12, 0x12, 0x0D, 0x00, 0x00, 0x18, 0x00, 0x00, 0x10, 0x18,\
	0x14, 0x12, 0x11, 0x00, 0x00, 0x10, 0x18, 0x14, 0x12, 0x11, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80,\
	0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x7F, 0x03, 0x0C, 0x30, 0x0C, 0x03, 0x7F, 0x00, 0x00, 0x38, 0x54, 0x54, 0x58, 0x00, 0x00,\
	0x7C, 0x04, 0x04, 0x78, 0x00, 0x00, 0x3C, 0x40, 0x40, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xAA, 0xAA, 0xAA,\
	0x28, 0x08, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x03, 0x0C, 0x30, 0x0C, 0x03, 0x7F,\
	0x00, 0x00, 0x26, 0x49, 0x49, 0x49, 0x32, 0x00, 0x00, 0x7F, 0x02, 0x04, 0x08, 0x10, 0x7F, 0x00